(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{224:function(a,e,s){"use strict";s.r(e);var t=s(28),l=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"mongodb-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-命令"}},[a._v("#")]),a._v(" MongoDB 命令")]),a._v(" "),s("h4",{attrs:{id:"数据库基础操作命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库基础操作命令"}},[a._v("#")]),a._v(" 数据库基础操作命令")]),a._v(" "),s("ul",[s("li",[a._v("命令行输入mongo进入MongoDB命令交互模式进入")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mongo\n")])])]),s("ul",[s("li",[a._v("列出已有db")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("show dbs\n")])])]),s("ul",[s("li",[a._v("如果my_db存在，则切换到my_db，如果不存在，则创建之")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("use my_db\n")])])]),s("ul",[s("li",[a._v("显示当前db")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db\n")])])]),s("ul",[s("li",[a._v("创建集合my_col")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('db.createCollection("my_col");\n')])])]),s("ul",[s("li",[a._v("列出改db下面所有的集合")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("show collections\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("show tables\n")])])]),s("ul",[s("li",[a._v("删除集合my_col")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.my_col.drop()\n")])])]),s("ul",[s("li",[a._v("删除当前数据库")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.dropDatabase();\n")])])]),s("h3",{attrs:{id:"数据库curd操作命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库curd操作命令"}},[a._v("#")]),a._v(" 数据库CURD操作命令")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("插入数据")]),a._v(" "),s("ul",[s("li",[a._v("插入一条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.insert({name: 'lisi'});\ndb.collections.insertOne({name: '王梅梅2'});\n")])])]),s("ul",[s("li",[a._v("插入多条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.insert([{name: '李白'}, {name: '杜甫'}])\ndb.collections.insertMany([{name: '李白1'}, {name: '杜甫1'}]);\n")])])]),s("ul",[s("li",[a._v("保存数据也可以理解为插入")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.save([{name: '李白1'}, {name: '杜甫1'}]);\n")])])])]),a._v(" "),s("li",[s("p",[a._v("更新数据")]),a._v(" "),s("ul",[s("li",[a._v("更新一条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.update({name: '李白1'}, {$set:{name: '岳帅'}});\n")])])]),s("ul",[s("li",[a._v("更新多条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.update({age: 35}, {$set:{age: 36}}, {multi: true});\n")])])]),s("ul",[s("li",[a._v("使用保存数据全部替换")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('db.collections.save({"_id" : ObjectId("5d0751ef41623d5db6cd4d44"), name: \'李白\'})\n')])])])]),a._v(" "),s("li",[s("p",[a._v("删除数据")]),a._v(" "),s("ul",[s("li",[a._v("删除一条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.deleteOne({name: '张三'});\ndb.collections.remove({age: 36}, true);\n")])])]),s("ul",[s("li",[a._v("删除多条数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.deleteMany({age: 36});\ndb.collections.remove({age: '20'});\n")])])])]),a._v(" "),s("li",[s("p",[a._v("查询")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.collections.find();\n")])])]),s("ul",[s("li",[a._v("查询等于")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: : 500});\n")])])]),s("ul",[s("li",[a._v("查询大于")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: {$gt: 500}});\n")])])]),s("ul",[s("li",[a._v("查询大于等于")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: {$gte: 500}});\n")])])]),s("ul",[s("li",[a._v("查询小于等于")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: {$lte: 500}});\n")])])]),s("ul",[s("li",[a._v("查询小于")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: {$lt: 500}});\n")])])]),s("ul",[s("li",[a._v("查询小于大的，大于小的（如大于10小于20）")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({age: {$gt: 20, $lt: 30}});\n")])])]),s("ul",[s("li",[a._v("查询条数")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find().limit(10);\n")])])]),s("ul",[s("li",[a._v("跳过指定数量")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.user.find().skip(10).limit(10);\n")])])])]),a._v(" "),s("li",[s("p",[a._v("删除文档中的一个属性")])])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.update({name: '张三'}, {$unset:{age: 1}})\n")])])]),s("ul",[s("li",[a._v("内嵌文档\n"),s("ul",[s("li",[a._v("插入")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.user.update(\n    {name: '李四'}, \n    {\n        $set: {\n            hobby: {\n                cities: ['北京', '南京'],\n                movies: ['哪吒']\n            }\n        }\n    }\n)\n")])])]),s("ul",[s("li",[a._v("查询")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.user.find({\"hobby.movies\": '哪吒'});\n")])])]),s("ul",[s("li",[a._v("向内嵌文档的数组中添加")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("*会重复添加*\ndb.user.update(\n    {name: '张三'}, \n    {\n        $push: {\n            'hobby.movies': '哪吒'\n        }\n    }\n)\n*不会重复添加*\ndb.user.update(\n    {name: '张三'}, \n    {\n        $addToSet: {\n            'hobby.movies': '哪吒'\n        }\n    }\n)\n")])])]),s("ul",[s("li",[a._v("删除")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.user.remove({'hobby.cities': '北京'})\n")])])])]),a._v(" "),s("li",[a._v("获取文档的属性值")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.findOne({name: '杜甫'})._id;\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.users.find({name: '杜甫'})[0]._id;\n")])])]),s("ul",[s("li",[a._v("获取 或 数据")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('db.emp.find({$or: [\n    {"sal": {$lte: 1000}},\n    {"sal": {$gte: 2500}}\n]});\n')])])]),s("ul",[s("li",[s("p",[a._v("改变整个数据类型")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.find({mgr: {$type: 2}}).forEach(\n    function(doc) {\n        db.emp.update({'_id':doc._id}, {$set:{'mgr': parseInt(doc.mgr)}});\n    }\n);\n")])])]),s("ul",[s("li",[a._v("1 Double 浮点型")]),a._v(" "),s("li",[a._v("2 String UTF-8字符串都可表示为字符串类型的数据")]),a._v(" "),s("li",[a._v("3 Object 对象，嵌套另外的文档")]),a._v(" "),s("li",[a._v("4 Array 值的集合或者列表可以表示成数组")]),a._v(" "),s("li",[a._v("5 Binary data 二进制")]),a._v(" "),s("li",[a._v("7 Object id 对象id是文档的12字节的唯一 ID 系统默认会自动生成")]),a._v(" "),s("li",[a._v("8 Boolean 布尔类型有两个值TRUE和FALSE")]),a._v(" "),s("li",[a._v("9 Date 日期类型存储的是从标准纪元开始的毫秒数。不存储时区")]),a._v(" "),s("li",[a._v("10 Null 用于表示空值或者不存在的字段")]),a._v(" "),s("li",[a._v("11 Regular expression 采用js 的正则表达式语法")]),a._v(" "),s("li",[a._v("13 JavaScript code 可以存放Javasript 代码")]),a._v(" "),s("li",[a._v("14 Symbol 符号")]),a._v(" "),s("li",[a._v("15 JavaScript code with scope")]),a._v(" "),s("li",[a._v("16 32-bit integer 32位整数类型")]),a._v(" "),s("li",[a._v("17 Timestamp 特殊语义的时间戳数据类型")]),a._v(" "),s("li",[a._v("18 64-bit integer 64位整数类型")])])]),a._v(" "),s("li",[s("p",[a._v("$inc 进行增减的操作")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.updateMany({sal: {$lt: 1000}}, {$inc: {sal: 400}});\n")])])])]),a._v(" "),s("li",[s("p",[a._v("sort 可以以任意的顺序排序")]),a._v(" "),s("ul",[s("li",[a._v("倒序")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.find().sort({sal: -1});\n")])])]),s("ul",[s("li",[a._v("正序")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.find().sort({sal: 1});\n")])])]),s("ul",[s("li",[a._v("多条件排序")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.find().sort({sal: 1, empo: -1});\n")])])])]),a._v(" "),s("li",[s("p",[a._v("映射\n显示为1，不显示为0")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("db.emp.find({}, {ename: 1, _id: 0});\n")])])])]),a._v(" "),s("li",[s("p",[a._v("导出集合")])])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mongoexport -d change_log<数据库名> -c projects<集合名> -o d:/projects.json<路径> --type json\n\nmongoexport -d change_log -c projects -o d:/projects.json --type json\n")])])]),s("ul",[s("li",[a._v("导入文件")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mongoimport -d dbname -c colname --file path(路径)/文件名.json --type json\n")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);